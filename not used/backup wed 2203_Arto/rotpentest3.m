ramp = @(t) 1.*t;

% Define input
T = 10;
h = 0.001;
time_vector = [h:h:T]';

step_vector = ramp(time_vector); 
step_vector(step_vector>ramp(3)) = 0;

input = -step_vector;

tm = sim('white_box_beam.slx', time_vector, [], [time_vector input]);

xbeam = Theta1;
xpend = Theta2;

%% Correct output angles after calibration
offset = [1.185896,1.195229];
slope = [1.208265,1.209528];
[xbeam, xpend] = calib(xbeam, xpend, offset, slope);
% Unwrap data
xbeam = unwrap(xbeam);
xpend = unwrap(xpend);


%% Plot experimental outputs
figure(3); hold on; stairs(tm, xbeam); stairs(tm, xpend);
title('Experimental output angles'); ylabel('Angles [rad]'); legend({'\theta_1', '\theta_2'}); xlabel('time [s]')